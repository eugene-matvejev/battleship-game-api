language: "php"

php:
    - "7.0"

env:
  - DB=mysql    DATABASE_ENGINE=pdo_mysql DATABASE_PORT=3306
  - DB=mariadb  DATABASE_ENGINE=pdo_mysql DATABASE_PORT=3306
  - DB=postgres DATABASE_ENGINE=pdo_pgsql DATABASE_PORT=5432 DATABASE_USER=postgres

before_script:
    - "cp app/config/parameters.yml.dist app/config/parameters.yml"
    - "composer install --no-progress --no-interaction"

script:
    - "php bin/phpunit -c phpunit.xml --colors=always --verbose --coverage-clover=coverage.xml"

after_success:
    - "bash <(curl -s https://codecov.io/bash)"
