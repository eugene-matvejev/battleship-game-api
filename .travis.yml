language: "php"

php:
    - "7.0"

services:
    - "mysql"

before_script:
    - "cp app/config/parameters.yml.dist app/config/parameters.yml"
    - "composer install --no-progress --no-interaction --no-scripts"
    - "php bin/console doctrine:database:create --if-not-exists"
    - "composer install --no-progress --no-interaction"

script:
    - "php bin/phpunit -c phpunit.xml --colors=always --verbose --coverage-clover=coverage.xml"

after_success:
    - "bash <(curl -s https://codecov.io/bash)"
